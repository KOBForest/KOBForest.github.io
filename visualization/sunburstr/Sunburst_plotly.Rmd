---
title: "Untitled"
author: "Kevin O'Brien"
date: "24 November 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



### Sunburst Charts in R

How to make sunburst charts in R with Plotly.


Basic Sunburst Chart

```{r}

library(plotly)

```


```{r}
fig <- plot_ly(

  labels = c("Eve", "Cain", "Seth", "Enos", "Noam", "Abel", "Awan", "Enoch", "Azura"),

  parents = c("", "Eve", "Eve", "Seth", "Seth", "Eve", "Eve", "Awan", "Eve"),

  values = c(10, 14, 12, 10, 2, 6, 6, 4, 4),

  type = 'sunburst'

)

```


```{r}
fig

```
 

Branchvalues

With branchvalues "total", the value of the parent represents the width of its wedge. In the example below, "Enoch" is 4 and "Awan" is 6 and so Enoch's width is 4/6ths of Awans. With branchvalues "remainder", the parent's width is determined by its own value plus those of its children. So, Enoch's width is 4/10ths of Awan's (4 / (6 + 4)).


Note that this means that the sum of the values of the children cannot exceed the value of their parent when branchvalues "total". When branchvalues "relative" (the default), children will not take up all of the space below their parent (unless the parent is the root and it has a value of 0).


```{r}

library(plotly)


fig <- plot_ly(

  labels = c("Eve", "Cain", "Seth", "Enos", "Noam", "Abel", "Awan", "Enoch", "Azura"),

  parents = c("", "Eve", "Eve", "Seth", "Seth", "Eve", "Eve", "Awan", "Eve"),

  values = c(65, 14, 12, 10, 2, 6, 6, 4, 4),

  type = 'sunburst',

  branchvalues = 'total'

)

```



```{r}
fig

 
```

### Sunburst with Repeated Labels


```{r}
library(plotly)


d <- data.frame(

    ids = c(

    "North America", "Europe", "Australia", "North America - Football", "Soccer",

    "North America - Rugby", "Europe - Football", "Rugby",

    "Europe - American Football","Australia - Football", "Association",

    "Australian Rules", "Autstralia - American Football", "Australia - Rugby",

    "Rugby League", "Rugby Union"

  ),

  labels = c(

    "North<br>America", "Europe", "Australia", "Football", "Soccer", "Rugby",

    "Football", "Rugby", "American<br>Football", "Football", "Association",

    "Australian<br>Rules", "American<br>Football", "Rugby", "Rugby<br>League",

    "Rugby<br>Union"

  ),

  parents = c(

    "", "", "", "North America", "North America", "North America", "Europe",

    "Europe", "Europe","Australia", "Australia - Football", "Australia - Football",

    "Australia - Football", "Australia - Football", "Australia - Rugby",

    "Australia - Rugby"

  ),

  stringsAsFactors = FALSE

)


fig <- plot_ly(d, ids = ~ids, labels = ~labels, parents = ~parents, type = 'sunburst')


fig

```
 
 